function FastClick(t){"use strict";var e,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var s=Node.prototype.removeEventListener;"click"===e?s.call(t,e,n.hijacked||n,i):s.call(t,e,n,i)},t.addEventListener=function(e,n,i){var s=Node.prototype.addEventListener;"click"===e?s.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):s.call(t,e,n,i)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}function strtr(t,e,n){if("object"==typeof e){for(var i="",s=0;s<t.length;s++)i+="0";var o=0,a=-1,r="";for(fr in e)for(o=0;-1!=(a=t.indexOf(fr,o));)if(0==parseInt(i.substr(a,fr.length))){for(var l=0;l<e[fr].length;l++)r+="1";i=i.substr(0,a)+r+i.substr(a+fr.length,i.length-(a+fr.length)),t=t.substr(0,a)+e[fr]+t.substr(a+fr.length,t.length-(a+fr.length)),o=a+e[fr].length+1,r=""}else o=a+1;return t}for(var c=0;c<e.length;c++)t=t.replace(new RegExp(e.charAt(c),"g"),n.charAt(c));return t}function __(t,e){if(void 0!==cms.translations[t])var t=cms.translations[t];return void 0==e?t:strtr(t,e)}function readImage(t,e){if(t.files&&t.files[0]&&e){var n=new FileReader;n.onload=function(t){var n=new Image;n.src=t.target.result;var i=n.width/n.height,s=document.createElement("canvas");s.width=100*i,s.height=100;var o=s.getContext("2d");o.drawImage(n,0,0,s.width,s.height),e.attr("src",s.toDataURL("image/jpeg",1))},n.readAsDataURL(t.files[0])}}(function(){String.prototype.endsWith||(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n,i,s;if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');for(i=this.length>>>0,e=+e||0,1/0===Math.abs(e)&&(e=0),0>e&&(e+=i,0>e&&(e=0)),n=s=e;i>=e?i>s:s>i;n=i>=e?++s:--s)if(this[n]===t)return n;return-1}),Function.prototype.bind||(Function.prototype.bind=function(t){var e,n,i,s;if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return e=Array.prototype.slice.call(arguments,1),s=this,i=function(){},n=function(){return s.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))},i.prototype=this.prototype,n.prototype=new i,n}),Object.keys||(Object.keys=function(){"use strict";var t,e,n;return n=Object.prototype.hasOwnProperty,e={toString:null}.propertyIsEnumerable("toString")?!1:!0,t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],function(i){var s,o,a,r,l,c,u;if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");for(a=[],r=0,c=i.length;c>r;r++)o=i[r],n.call(i,o)&&a.push(o);if(e)for(l=0,u=t.length;u>l;l++)s=t[l],n.call(i,s)&&a.push(s);return a}}.call(this)),window.getScreenSize=function(t,e){return t.is(":visible")?"small":e.is(":visible")?"tablet":"desktop"},window.elHasClass=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1},window.elRemoveClass=function(t,e){return t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim()}}).call(this),function(){var t,e;e={is_mobile:!1,resize_delay:400,stored_values_prefix:"cms_",consts:{COLORS:["#71c73e","#77b7c5","#d54848","#6c42e5","#e8e64e","#dd56e6","#ecad3f","#618b9d","#b68b68","#36a766","#3156be","#00b3ff","#646464","#a946e8","#9d9d9d"]}},t=function(){return this.init=[],this.plugins={},this.settings={},this.localStorageSupported="undefined"!=typeof window.Storage?!0:!1,this},t.prototype.start=function(t,n){return null==t&&(t=[]),null==n&&(n={}),function(i){var s,o,a,r;for($("html").addClass("pxajs"),t.length>0&&$.merge(i.init,t),i.settings=$.extend(!0,{},e,n||{}),i.settings.is_mobile=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),i.settings.is_mobile&&FastClick&&FastClick.attach(document.body),r=i.init,o=0,a=r.length;a>o;o++)s=r[o],$.proxy(s,i)();return $(window).trigger("pa.loaded"),$(window).resize()}(this),this},t.prototype.addInitializer=function(t){return this.init.push(t)},t.prototype.initPlugin=function(t,e,n){return null!=n&&(this.settings=$.extend(!0,{},this.settings,n||{})),this.plugins[t]=e,e.init?e.init():void 0},t.prototype.storeValue=function(t,e,n){var i;if(null==n&&(n=!1),this.localStorageSupported&&!n)try{return void window.localStorage.setItem(this.settings.stored_values_prefix+t,e)}catch(s){i=s}return document.cookie=this.settings.stored_values_prefix+t+"="+escape(e)},t.prototype.getStoredValue=function(t,e,n){var i,s,o,a,r,l,c,u,d;if(null==e&&(e=!1),null==n&&(n=null),this.localStorageSupported&&!e)try{return l=window.localStorage.getItem(this.settings.stored_values_prefix+t),l?l:n}catch(h){o=h}for(s=document.cookie.split(";"),u=0,d=s.length;d>u;u++)if(i=s[u],r=i.indexOf("="),a=i.substr(0,r).replace(/^\s+|\s+$/g,""),c=i.substr(r+1).replace(/^\s+|\s+$/g,""),a===this.settings.stored_values_prefix+t)return c;return n},t.Constructor=t,window.KodiCMS=new t}.call(this),function(){var t;t=function(t){var e;return e=null,function(){return e&&clearTimeout(e),e=setTimeout(function(){return e=null,t.call(this)},KodiCMS.settings.resize_delay)}},KodiCMS.addInitializer(function(){var e,n,i,s;return s=null,i=$(window),e=$('<div id="small-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff;"></div>'),n=$('<div id="tablet-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff;"></div>'),$("body").append(e).append(n),i.on("resize",t(function(){return i.trigger("pa.resize"),e.is(":visible")?("small"!==s&&i.trigger("pa.screen.small"),s="small"):n.is(":visible")?("tablet"!==s&&i.trigger("pa.screen.tablet"),s="tablet"):("desktop"!==s&&i.trigger("pa.screen.desktop"),s="desktop")}))})}.call(this),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){"use strict";var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},FastClick.prototype.determineEventType=function(t){"use strict";return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){"use strict";var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){"use strict";var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(t){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){"use strict";var e,n,i,s,o,a=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=t.changedTouches[0],a=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=a.tagName.toLowerCase(),"label"===i){if(e=this.findControl(a)){if(this.focus(a),this.deviceIsAndroid)return!1;a=e}}else if(this.needsFocus(a))return t.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(a),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(s=a.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(a)||(t.preventDefault(),this.sendClick(a,t)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){"use strict";var e,n;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction?!0:!1},FastClick.attach=function(t){"use strict";return new FastClick(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(){KodiCMS.MainNavbar=function(){return this._scroller=!1,this._wheight=null,this.scroll_pos=0,this},KodiCMS.MainNavbar.prototype.init=function(){var t;return this.$navbar=$("#main-navbar"),this.$header=this.$navbar.find(".navbar-header"),this.$toggle=this.$navbar.find(".navbar-toggle:first"),this.$collapse=$("#main-navbar-collapse"),this.$collapse_div=this.$collapse.find("> div"),t=!1,$(window).on("pa.screen.small pa.screen.tablet",function(e){return function(){return"fixed"===e.$navbar.css("position")&&e._setupScroller(),t=!0}}(this)).on("pa.screen.desktop",function(e){return function(){return e._removeScroller(),t=!1}}(this)),this.$navbar.on("click",".nav-icon-btn.dropdown > .dropdown-toggle",function(e){return t?(e.preventDefault(),e.stopPropagation(),document.location.href=$(this).attr("href"),!1):void 0})},KodiCMS.MainNavbar.prototype._setupScroller=function(){return this._scroller?void 0:(this._scroller=!0,this.$collapse_div.pixelSlimScroll({}),this.$navbar.on("shown.bs.collapse.mn_collapse",$.proxy(function(t){return function(){return t._updateCollapseHeight(),t._watchWindowHeight()}}(this),this)).on("hidden.bs.collapse.mn_collapse",$.proxy(function(t){return function(){return t._wheight=null,t.$collapse_div.pixelSlimScroll({scrollTo:"0px"})}}(this),this)).on("shown.bs.dropdown.mn_collapse",$.proxy(this._updateCollapseHeight,this)).on("hidden.bs.dropdown.mn_collapse",$.proxy(this._updateCollapseHeight,this)),this._updateCollapseHeight())},KodiCMS.MainNavbar.prototype._removeScroller=function(){return this._scroller?(this._wheight=null,this._scroller=!1,this.$collapse_div.pixelSlimScroll({destroy:"destroy"}),this.$navbar.off("shown.bs.collapse.mn_collapse"),this.$navbar.off("hidden.bs.collapse.mn_collapse"),this.$navbar.off("shown.bs.dropdown.mn_collapse"),this.$navbar.off("hidden.bs.dropdown.mn_collapse"),this.$collapse.attr("style","")):void 0},KodiCMS.MainNavbar.prototype._updateCollapseHeight=function(){var t,e,n;if(this._scroller)return n=$(window).innerHeight(),t=this.$header.outerHeight(),e=this.$collapse_div.scrollTop(),this.$collapse_div.css(t+this.$collapse_div.css({"max-height":"none"}).outerHeight()>n?{"max-height":n-t}:{"max-height":"none"}),this.$collapse_div.pixelSlimScroll({scrollTo:e+"px"})},KodiCMS.MainNavbar.prototype._watchWindowHeight=function(){var t;return this._wheight=$(window).innerHeight(),t=function(e){return function(){return null!==e._wheight?(e._wheight!==$(window).innerHeight()&&e._updateCollapseHeight(),e._wheight=$(window).innerHeight(),setTimeout(t,100)):void 0}}(this),window.setTimeout(t,100)},KodiCMS.MainNavbar.Constructor=KodiCMS.MainNavbar,KodiCMS.addInitializer(function(){return KodiCMS.initPlugin("main_navbar",new KodiCMS.MainNavbar)})}.call(this),function(){KodiCMS.MainMenu=function(){return this._screen=null,this._last_screen=null,this._animate=!1,this._close_timer=null,this._dropdown_li=null,this._dropdown=null,this},KodiCMS.MainMenu.prototype.init=function(){var t,e;return this.$menu=$("#main-menu"),this.$menu.length?(this.$body=$("body"),this.menu=this.$menu[0],this.$ssw_point=$("#small-screen-width-point"),this.$tsw_point=$("#tablet-screen-width-point"),t=this,KodiCMS.settings.main_menu.store_state&&(e=this._getMenuState(),document.body.className+=" disable-mm-animation",null!==e&&this.$body["collapsed"===e?"addClass":"removeClass"]("mmc"),setTimeout(function(){return function(){return elRemoveClass(document.body,"disable-mm-animation")}}(this),20)),$(".navigation > li:has(ul)",this.$menu).each(function(){$("> ul > li",this).size()<1&&$(this).remove()}),this.setupAnimation(),$(window).on("resize.pa.mm",$.proxy(this.onResize,this)),this.onResize(),this.$menu.find(".navigation > .mm-dropdown").addClass("mm-dropdown-root"),KodiCMS.settings.main_menu.detect_active&&this.detectActiveItem(),$.support.transition&&this.$menu.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",$.proxy(this._onAnimationEnd,this)),$("#main-menu-toggle").on("click",$.proxy(this.toggle,this)),$("#main-menu-inner").slimScroll({height:"100%"}).on("slimscrolling",function(t){return function(){return t.closeCurrentDropdown(!0)}}(this)),this.$menu.on("click",".mm-dropdown > a",function(){var e;return e=this.parentNode,elHasClass(e,"mm-dropdown-root")&&t._collapsed()?elHasClass(e,"mmc-dropdown-open")?elHasClass(e,"freeze")?t.closeCurrentDropdown(!0):t.freezeDropdown(e):t.openDropdown(e,!0):t.toggleSubmenu(e),!1}),this.$menu.find(".navigation").on("mouseenter.pa.mm-dropdown",".mm-dropdown-root",function(){return t.clearCloseTimer(),t._dropdown_li!==this?!t._collapsed()||t._dropdown_li&&elHasClass(t._dropdown_li,"freeze")?void 0:t.openDropdown(this):void 0}).on("mouseleave.pa.mm-dropdown",".mm-dropdown-root",function(){return t._close_timer=setTimeout(function(){return t.closeCurrentDropdown()},KodiCMS.settings.main_menu.dropdown_close_delay)}),this):void 0},KodiCMS.MainMenu.prototype._collapsed=function(){return"desktop"===this._screen&&elHasClass(document.body,"mmc")||"desktop"!==this._screen&&!elHasClass(document.body,"mme")},KodiCMS.MainMenu.prototype.onResize=function(){return this._screen=getScreenSize(this.$ssw_point,this.$tsw_point),this._animate=-1===KodiCMS.settings.main_menu.disable_animation_on.indexOf(screen),this._dropdown_li&&this.closeCurrentDropdown(!0),("small"===this._screen&&this._last_screen!==this._screen||"tablet"===this._screen&&"small"===this._last_screen)&&(document.body.className+=" disable-mm-animation",setTimeout(function(){return function(){return elRemoveClass(document.body,"disable-mm-animation")}}(this),20)),this._last_screen=this._screen},KodiCMS.MainMenu.prototype.clearCloseTimer=function(){return this._close_timer?(clearTimeout(this._close_timer),this._close_timer=null):void 0},KodiCMS.MainMenu.prototype._onAnimationEnd=function(t){return"desktop"===this._screen&&"main-menu"===t.target.id?$(window).trigger("resize"):void 0},KodiCMS.MainMenu.prototype.toggle=function(){var t,e;return t="small"===this._screen||"tablet"===this._screen?"mme":"mmc",elHasClass(document.body,t)?elRemoveClass(document.body,t):document.body.className+=" "+t,"mmc"!==t?(e=document.getElementById(""),$("#main-navbar-collapse").stop().removeClass("in collapsing").addClass("collapse")[0].style.height="0px",$("#main-navbar .navbar-toggle").addClass("collapsed")):(KodiCMS.settings.main_menu.store_state&&this._storeMenuState(elHasClass(document.body,"mmc")),$.support.transition?void 0:$(window).trigger("resize"))},KodiCMS.MainMenu.prototype.toggleSubmenu=function(t){return this[elHasClass(t,"open")?"collapseSubmenu":"expandSubmenu"](t),!1},KodiCMS.MainMenu.prototype.collapseSubmenu=function(t){var e,n;return e=$(t),n=e.find("> ul"),this._animate?n.animate({height:0},KodiCMS.settings.main_menu.animation_speed,function(){return function(){return elRemoveClass(t,"open"),n.attr("style",""),e.find(".mm-dropdown.open").removeClass("open").find("> ul").attr("style","")}}(this)):elRemoveClass(t,"open"),!1},KodiCMS.MainMenu.prototype.expandSubmenu=function(t){var e,n,i,s;return e=$(t),KodiCMS.settings.main_menu.accordion&&this.collapseAllSubmenus(t),this._animate?(n=e.find("> ul"),s=n[0],s.className+=" get-height",i=n.height(),elRemoveClass(s,"get-height"),s.style.display="block",s.style.height="0px",t.className+=" open",n.animate({height:i},KodiCMS.settings.main_menu.animation_speed,function(){return function(){return n.attr("style","")}}(this))):t.className+=" open"},KodiCMS.MainMenu.prototype.collapseAllSubmenus=function(t){var e;return e=this,$(t).parent().find("> .mm-dropdown.open").each(function(){return e.collapseSubmenu(this)})},KodiCMS.MainMenu.prototype.openDropdown=function(t,e){var n,i,s,o,a,r,l,c,u,d,h;return null==e&&(e=!1),this._dropdown_li&&this.closeCurrentDropdown(e),n=$(t),s=n.find("> ul"),u=s[0],this._dropdown_li=t,this._dropdown=u,i=s.find("> .mmc-title"),i.length||(i=$('<div class="mmc-title"></div>').text(n.find("> a > .mm-text").text()),u.insertBefore(i[0],u.firstChild)),t.className+=" mmc-dropdown-open",u.className+=" mmc-dropdown-open-ul",c=n.position().top,elHasClass(document.body,"main-menu-fixed")?(o=s.find(".mmc-wrapper"),o.length||(h=document.createElement("div"),h.className="mmc-wrapper",h.style.overflow="hidden",h.style.position="relative",o=$(h),o.append(s.find("> li")),u.appendChild(h)),d=$(window).innerHeight(),l=i.outerHeight(),r=l+3*s.find(".mmc-wrapper > li").first().outerHeight(),c+r>d?(a=c-$("#main-navbar").outerHeight(),u.className+=" top",u.style.bottom=d-c-l+"px"):(a=d-c-l,u.style.top=c+"px"),elHasClass(u,"top")?u.appendChild(i[0]):u.insertBefore(i[0],u.firstChild),t.className+=" slimscroll-attached",o[0].style.maxHeight=a-10+"px",o.pixelSlimScroll({})):u.style.top=c+"px",e&&this.freezeDropdown(t),e||s.on("mouseenter",function(t){return function(){return t.clearCloseTimer()}}(this)).on("mouseleave",function(t){return function(){return t._close_timer=setTimeout(function(){return t.closeCurrentDropdown()},KodiCMS.settings.main_menu.dropdown_close_delay)}}(this)),this.menu.appendChild(u)},KodiCMS.MainMenu.prototype.closeCurrentDropdown=function(t){var e,n;return null==t&&(t=!1),!this._dropdown_li||elHasClass(this._dropdown_li,"freeze")&&!t?void 0:(this.clearCloseTimer(),e=$(this._dropdown),elHasClass(this._dropdown_li,"slimscroll-attached")&&(elRemoveClass(this._dropdown_li,"slimscroll-attached"),n=e.find(".mmc-wrapper"),n.pixelSlimScroll({destroy:"destroy"}).find("> *").appendTo(e),n.remove()),this._dropdown_li.appendChild(this._dropdown),elRemoveClass(this._dropdown,"mmc-dropdown-open-ul"),elRemoveClass(this._dropdown,"top"),elRemoveClass(this._dropdown_li,"mmc-dropdown-open"),elRemoveClass(this._dropdown_li,"freeze"),$(this._dropdown_li).attr("style",""),e.attr("style","").off("mouseenter").off("mouseleave"),this._dropdown=null,this._dropdown_li=null)},KodiCMS.MainMenu.prototype.freezeDropdown=function(t){return t.className+=" freeze"},KodiCMS.MainMenu.prototype.setupAnimation=function(){var t,e,n,i;return n=document.body,i=KodiCMS.settings.main_menu.disable_animation_on,n.className+=" dont-animate-mm-content",t=$("#main-menu"),e=t.find(".navigation"),e.find("> .mm-dropdown > ul").addClass("mmc-dropdown-delay animated"),e.find("> li > a > .mm-text").addClass("mmc-dropdown-delay animated fadeIn"),t.find(".menu-content").addClass("animated fadeIn"),e.find("> .mm-dropdown > ul").addClass(elHasClass(n,"main-menu-right")||elHasClass(n,"right-to-left")&&!elHasClass(n,"main-menu-right")?"fadeInRight":"fadeInLeft"),n.className+=-1===i.indexOf("small")?" animate-mm-sm":" dont-animate-mm-content-sm",n.className+=-1===i.indexOf("tablet")?" animate-mm-md":" dont-animate-mm-content-md",n.className+=-1===i.indexOf("desktop")?" animate-mm-lg":" dont-animate-mm-content-lg",window.setTimeout(function(){return elRemoveClass(n,"dont-animate-mm-content")},500)},KodiCMS.MainMenu.prototype.detectActiveItem=function(){var t,e,n,i,s,o,a,r,l;for(o=(document.location+"").replace(/\#.*?$/,""),s=KodiCMS.settings.main_menu.detect_active_predicate,i=$("#main-menu .navigation"),i.find("li").removeClass("open active"),n=i[0].getElementsByTagName("a"),e=function(){return function(t){return t.className+=" active",elHasClass(t.parentNode,"navigation")?void 0:(t=t.parentNode.parentNode,t.className+=" open",e(t))}}(this),l=[],a=0,r=n.length;r>a;a++){if(t=n[a],-1===t.href.indexOf("#")&&s(t.href,o)){e(t.parentNode);break}l.push(void 0)}return l},KodiCMS.MainMenu.prototype._getMenuState=function(){return KodiCMS.getStoredValue(KodiCMS.settings.main_menu.store_state_key)},KodiCMS.MainMenu.prototype._storeMenuState=function(t){return KodiCMS.settings.main_menu.store_state?KodiCMS.storeValue(KodiCMS.settings.main_menu.store_state_key,t?"collapsed":"expanded"):void 0},KodiCMS.MainMenu.Constructor=KodiCMS.MainMenu,KodiCMS.addInitializer(function(){return KodiCMS.initPlugin("main_menu",new KodiCMS.MainMenu,{main_menu:{accordion:!0,animation_speed:250,store_state:!0,store_state_key:"mmstate",disable_animation_on:["small"],dropdown_close_delay:300,detect_active:!0,detect_active_predicate:function(t,e){return t==e?!0:BASE_URL==t&&t==e?!0:BASE_URL!=t&&-1!=e.indexOf(t)?!0:!1}}})})}.call(this),function(e){jQuery.fn.extend({pixelSlimScroll:function(n){var i={width:"auto",size:"2px",color:"#000",distance:"1px",start:"top",opacity:.4,railColor:"#333",railOpacity:.2,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"},s=e.extend(i,n);return this.each(function(){function i(t){if(u){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var i=t.target||t.srcTarget||t.srcElement;e(i).closest("."+s.wrapperClass).is(w.parent())&&o(n,!0),t.preventDefault&&!b&&t.preventDefault(),b||(t.returnValue=!1)}}function o(t,e,n){b=!1;var i=t,o=w.outerHeight()-M.outerHeight();if(e&&(i=parseInt(M.css("top"))+t*parseInt(s.wheelStep)/100*M.outerHeight(),i=Math.min(Math.max(i,0),o),i=t>0?Math.ceil(i):Math.floor(i),M.css({top:i+"px"})),g=parseInt(M.css("top"))/(w.outerHeight()-M.outerHeight()),i=g*(w[0].scrollHeight-w.outerHeight()),n){i=t;var a=i/w[0].scrollHeight*w.outerHeight();a=Math.min(Math.max(a,0),o),M.css({top:a+"px"})}w.scrollTop(i),w.trigger("slimscrolling",~~i),l(),c()}function a(){window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}function r(){m=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),y),M.css({height:m+"px"});var t=m==w.outerHeight()?"none":"block";M.css({display:t})}function l(){if(r(),clearTimeout(f),g==~~g){if(b=s.allowPageScroll,_!=g){var t=0==~~g?"top":"bottom";w.trigger("slimscroll",t)}}else b=!1;return _=g,m>=w.outerHeight()?void(b=!0):void M.stop(!0,!0).fadeIn("fast")}function c(){}var u,d,h,f,p,m,g,_,v="<div></div>",y=30,b=!1,w=e(this);if(w.parent().hasClass(s.wrapperClass)){var C=w.scrollTop();if(M=w.parent().find("."+s.barClass),$=w.parent().find("."+s.railClass),r(),e.isPlainObject(n)){if("scrollTo"in n)C=parseInt(s.scrollTo);else if("scrollBy"in n)C+=parseInt(s.scrollBy);else if("destroy"in n)return M.remove(),$.remove(),void w.unwrap();o(C,!1,!0)}}else{var k=e(v).addClass(s.wrapperClass).css({position:"relative",overflow:"hidden",width:s.width});w.css({overflow:"hidden",width:s.width});var $=e(v).addClass(s.railClass).css({width:s.size,height:"100%",position:"absolute",top:0,display:"none","border-radius":s.railBorderRadius,background:s.railColor,opacity:s.railOpacity,zIndex:90}),M=e(v).addClass(s.barClass).css({background:s.color,width:s.size,position:"absolute",top:0,opacity:s.opacity,display:"block","border-radius":s.borderRadius,BorderRadius:s.borderRadius,MozBorderRadius:s.borderRadius,WebkitBorderRadius:s.borderRadius,zIndex:99});$.css({right:s.distance}),M.css({right:s.distance}),w.wrap(k),w.parent().append(M),w.parent().append($),M.bind("mousedown",function(n){var i=e(document);return h=!0,t=parseFloat(M.css("top")),pageY=n.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,M.css("top",currTop),o(0,M.position().top,!1)}),i.bind("mouseup.slimscroll",function(){h=!1,c(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),$.hover(function(){l()},function(){c()}),M.hover(function(){d=!0},function(){d=!1}),w.hover(function(){u=!0,l(),c()},function(){u=!1,c()}),w.bind("touchstart",function(t){t.originalEvent.touches.length&&(p=t.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(t){if(b||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var e=(p-t.originalEvent.touches[0].pageY)/s.touchScrollStep;o(e,!0),p=t.originalEvent.touches[0].pageY}}),r(),a()}}),this}}),jQuery.fn.extend({pixelslimscroll:jQuery.fn.pixelSlimScroll})}(jQuery),!function(t){var e=function(){var e,n=[],i=!1,s=function(){clearTimeout(e),e=setTimeout(o,100)},o=function(){for(var t=0,e=n.length;e>t;t++)n[t].apply()};return{register:function(e){n.push(e),i===!1&&(t(window).bind("resize",s),i=!0)},unregister:function(t){for(var e=0,i=n.length;i>e;e++)if(n[e]==t){delete n[e];break}}}}(),n=function(n,i){this.element=t(n),this.dropdown=t('<li class="dropdown hide pull-right tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+i.text+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>').prependTo(this.element),this.element.parent().is(".tabs-below")&&this.dropdown.addClass("dropup"),e.register(t.proxy(this.layout,this)),this.layout()};n.prototype={constructor:n,layout:function(){var e=[];this.dropdown.removeClass("hide"),this.element.append(this.dropdown.find("li")).find(">li").not(".tabdrop").each(function(){this.offsetTop>0&&e.push(this)}),e.length>0?(e=t(e),this.dropdown.find("ul").empty().append(e),1==this.dropdown.find(".active").length?this.dropdown.addClass("active"):this.dropdown.removeClass("active")):this.dropdown.addClass("hide")}},t.fn.tabdrop=function(e){return this.each(function(){var i=t(this),s=i.data("tabdrop"),o="object"==typeof e&&e;s||i.data("tabdrop",s=new n(this,t.extend({},t.fn.tabdrop.defaults,o))),"string"==typeof e&&s[e]()})},t.fn.tabdrop.defaults={text:'<i class="icon-align-justify"></i>'},t.fn.tabdrop.Constructor=n}(window.jQuery),function(e){jQuery.fn.extend({slimScroll:function(n){var i={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},s=e.extend(i,n);return this.each(function(){function i(t){if(u){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var i=t.target||t.srcTarget||t.srcElement;e(i).closest("."+s.wrapperClass).is(w.parent())&&o(n,!0),t.preventDefault&&!b&&t.preventDefault(),b||(t.returnValue=!1)}}function o(t,e,n){b=!1;var i=t,o=w.outerHeight()-S.outerHeight();if(e&&(i=parseInt(S.css("top"))+t*parseInt(s.wheelStep)/100*S.outerHeight(),i=Math.min(Math.max(i,0),o),i=t>0?Math.ceil(i):Math.floor(i),S.css({top:i+"px"})),g=parseInt(S.css("top"))/(w.outerHeight()-S.outerHeight()),i=g*(w[0].scrollHeight-w.outerHeight()),n){i=t;var a=i/w[0].scrollHeight*w.outerHeight();a=Math.min(Math.max(a,0),o),S.css({top:a+"px"})
}w.scrollTop(i),w.trigger("slimscrolling",~~i),l(),c()}function a(){window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}function r(){m=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),y),S.css({height:m+"px"});var t=m==w.outerHeight()?"none":"block";S.css({display:t})}function l(){if(r(),clearTimeout(f),g==~~g){if(b=s.allowPageScroll,_!=g){var t=0==~~g?"top":"bottom";w.trigger("slimscroll",t)}}else b=!1;return _=g,m>=w.outerHeight()?void(b=!0):(S.stop(!0,!0).fadeIn("fast"),void(s.railVisible&&M.stop(!0,!0).fadeIn("fast")))}function c(){s.alwaysVisible||(f=setTimeout(function(){s.disableFadeOut&&u||d||h||(S.fadeOut("slow"),M.fadeOut("slow"))},1e3))}var u,d,h,f,p,m,g,_,v="<div></div>",y=30,b=!1,w=e(this);if(w.parent().hasClass(s.wrapperClass)){var C=w.scrollTop();if(S=w.parent().find("."+s.barClass),M=w.parent().find("."+s.railClass),r(),e.isPlainObject(n)){if("height"in n&&"auto"==n.height){w.parent().css("height","auto"),w.css("height","auto");var k=w.parent().parent().height();w.parent().css("height",k),w.css("height",k)}if("scrollTo"in n)C=parseInt(s.scrollTo);else if("scrollBy"in n)C+=parseInt(s.scrollBy);else if("destroy"in n)return S.remove(),M.remove(),void w.unwrap();o(C,!1,!0)}}else{s.height="auto"==n.height?w.parent().height():n.height;var $=e(v).addClass(s.wrapperClass).css({position:"relative",overflow:"hidden",width:s.width,height:s.height});w.css({overflow:"hidden",width:s.width,height:s.height});var M=e(v).addClass(s.railClass).css({width:s.size,height:"100%",position:"absolute",top:0,display:s.alwaysVisible&&s.railVisible?"block":"none","border-radius":s.railBorderRadius,background:s.railColor,opacity:s.railOpacity,zIndex:90}),S=e(v).addClass(s.barClass).css({background:s.color,width:s.size,position:"absolute",top:0,opacity:s.opacity,display:s.alwaysVisible?"block":"none","border-radius":s.borderRadius,BorderRadius:s.borderRadius,MozBorderRadius:s.borderRadius,WebkitBorderRadius:s.borderRadius,zIndex:99}),D="right"==s.position?{right:s.distance}:{left:s.distance};M.css(D),S.css(D),w.wrap($),w.parent().append(S),w.parent().append(M),s.railDraggable&&S.bind("mousedown",function(n){var i=e(document);return h=!0,t=parseFloat(S.css("top")),pageY=n.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,S.css("top",currTop),o(0,S.position().top,!1)}),i.bind("mouseup.slimscroll",function(){h=!1,c(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),M.hover(function(){l()},function(){c()}),S.hover(function(){d=!0},function(){d=!1}),w.hover(function(){u=!0,l(),c()},function(){u=!1,c()}),w.bind("touchstart",function(t){t.originalEvent.touches.length&&(p=t.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(t){if(b||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var e=(p-t.originalEvent.touches[0].pageY)/s.touchScrollStep;o(e,!0),p=t.originalEvent.touches[0].pageY}}),r(),"bottom"===s.start?(S.css({top:w.outerHeight()-S.outerHeight()}),o(0,!0)):"top"!==s.start&&(o(e(s.start).position().top,null,!0),s.alwaysVisible||S.hide()),a()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),function(){$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}.call(this),function(){$.fn.scrollTo=function(t,e,n){"function"==typeof e&&2==arguments.length&&(n=e,e=t);var i=$.extend({scrollTarget:t,offsetTop:50,duration:500,easing:"swing"},e);return this.each(function(){var t=$(this),e="number"==typeof i.scrollTarget?i.scrollTarget:$(i.scrollTarget),s="number"==typeof e?e:e.offset().top+t.scrollTop()-parseInt(i.offsetTop);t.animate({scrollTop:s},parseInt(i.duration),i.easing,function(){"function"==typeof n&&n.call(this)})})}}.call(this),function(){var t;if(!$.fn.tabdrop)throw new Error("bootstrap-tabdrop.js required");t=$.fn.tabdrop,$.fn.tabdrop=function(e){return e=$.extend({},$.fn.tabdrop.defaults,e),this.each(function(){var n,i;return n=$(this),t.call(n,e),i=n.data("tabdrop"),i?(i.dropdown.on("click","li",function(){return $(this).parent().parent().find("a.dropdown-toggle").empty().html('<span class="display-tab"> '+$(this).text()+' </span><b class="caret"></b>'),i.layout()}),i.element.on("click","> li",function(){return $(this).hasClass("tabdrop")?void 0:(i.element.find("> .tabdrop > a.dropdown-toggle").empty().html(e.text+' <b class="caret"></b>'),i.layout())})):void 0})},$.fn.tabdrop.defaults={text:'<i class="fa fa-bars"></i>'}}.call(this),function(){$.fn.check=function(){return this.each(function(){this.checked=!0})},$.fn.uncheck=function(){return this.each(function(){this.checked=!1})},$.fn.checked=function(){return this.prop("checked")},$.fn.tabs=function(){return $("li a",this).on("click",function(){return $(this).parent().addClass("active").siblings().removeClass("active"),$("div.tab-pane").removeClass("active"),$($(this).attr("href")).addClass("active"),!1})},jQuery.browser={},jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),function(t){function e(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var n=e.handler,i=e.data.keys.toLowerCase().split(" "),s=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];e.handler=function(e){if(this===e.target||!(/textarea|select/i.test(e.target.nodeName)||t.inArray(e.target.type,s)>-1)){var o=t.hotkeys.specialKeys[e.keyCode],a=String.fromCharCode(e.which).toLowerCase(),r="",l={};t.each(["alt","ctrl","meta","shift"],function(t,n){e[n+"Key"]&&o!==n&&(r+=n+"+")}),r=r.replace("alt+ctrl+meta+shift","hyper"),o&&(l[r+o]=!0),a&&(l[r+a]=!0,l[r+t.hotkeys.shiftNums[a]]=!0,"shift+"===r&&(l[t.hotkeys.shiftNums[a]]=!0));for(var c=0,u=i.length;u>c;c++)if(l[i[c]])return n.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(this.jQuery),!function(){"use strict";var t=function(t,e){var o,a,r,l,c,u="object"==typeof e&&e.maintainCase||!1,d="object"==typeof e&&e.titleCase?e.titleCase:!1,h="object"==typeof e&&"object"==typeof e.custom&&e.custom?e.custom:{},f="object"==typeof e&&e.separator||"-",p="object"==typeof e&&+e.truncate>1&&e.truncate||!1,m="object"==typeof e&&e.uric||!1,g="object"==typeof e&&e.uricNoSlash||!1,_="object"==typeof e&&e.mark||!1,v="object"==typeof e&&e.lang&&s[e.lang]?s[e.lang]:"object"!=typeof e||e.lang!==!1&&e.lang!==!0?s.en:{},y=[";","?",":","@","&","=","+","$",",","/"],b=[";","?",":","@","&","=","+","$",","],w=[".","!","~","*","'","(",")"],C="",k=f;if(d&&"number"==typeof d.length&&Array.prototype.toString.call(d)&&d.forEach(function(t){h[t+""]=t+""}),"string"!=typeof t)return"";for("string"==typeof e?f=e:"object"==typeof e&&(m&&(k+=y.join("")),g&&(k+=b.join("")),_&&(k+=w.join(""))),Object.keys(h).forEach(function(e){var i;i=e.length>1?new RegExp("\\b"+n(e)+"\\b","gi"):new RegExp(n(e),"gi"),t=t.replace(i,h[e])}),d&&(t=t.replace(/(\w)(\S*)/g,function(t,e,n){var i=e.toUpperCase()+(null!==n?n:"");return Object.keys(h).indexOf(i.toLowerCase())<0?i:i.toLowerCase()})),k=n(k),t=t.replace(/(^\s+|\s+$)/g,""),c=!1,a=0,l=t.length;l>a;a++)r=t[a],i[r]?(r=c&&i[r].match(/[A-Za-z0-9]/)?" "+i[r]:i[r],c=!1):!v[r]||m&&-1!==y.join("").indexOf(r)||g&&-1!==b.join("").indexOf(r)||_&&-1!==w.join("").indexOf(r)?(c&&(/[A-Za-z0-9]/.test(r)||C.substr(-1).match(/A-Za-z0-9]/))&&(r=" "+r),c=!1):(r=c||C.substr(-1).match(/[A-Za-z0-9]/)?f+v[r]:v[r],r+=void 0!==t[a+1]&&t[a+1].match(/[A-Za-z0-9]/)?f:"",c=!0),C+=r.replace(new RegExp("[^\\w\\s"+k+"_-]","g"),f);return C=C.replace(/\s+/g,f).replace(new RegExp("\\"+f+"+","g"),f).replace(new RegExp("(^\\"+f+"+|\\"+f+"+$)","g"),""),p&&C.length>p&&(o=C.charAt(p)===f,C=C.slice(0,p),o||(C=C.slice(0,C.lastIndexOf(f)))),u||d||d.length||(C=C.toLowerCase()),C},e=function(e){return function(n){return t(n,e)}},n=function(t){return t.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},i={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"Ae","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"Oe","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"Ue","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"ue","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","α":"a","β":"v","γ":"g","δ":"d","ε":"e","ζ":"z","η":"i","θ":"th","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"ks","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"o","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"i","ώ":"o","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"I","Θ":"TH","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"KS","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"I","Ώ":"O","Ϊ":"I","Ϋ":"Y","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","Ќ":"Kj","ќ":"kj","Љ":"Lj","љ":"lj","Њ":"Nj","њ":"nj","Тс":"Ts","тс":"ts","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"U","ا":"a","أ":"a","إ":"i","آ":"aa","ؤ":"u","ئ":"e","ء":"a","ب":"b","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ي":"y","ى":"a","ة":"h","ﻻ":"la","ﻷ":"laa","ﻹ":"lai","ﻵ":"laa","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"(TM)","©":"(C)","œ":"oe","Œ":"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o","º":"o","ª":"a","•":"*",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY","元":"CNY","円":"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","đ":"d","Đ":"D","ẹ":"e","Ẹ":"E","ẽ":"e","Ẽ":"E","ế":"e","Ế":"E","ề":"e","Ề":"E","ệ":"e","Ệ":"E","ễ":"e","Ễ":"E","ọ":"o","Ọ":"o","ố":"o","Ố":"O","ồ":"o","Ồ":"O","ộ":"o","Ộ":"O","ỗ":"o","Ỗ":"O","ơ":"o","Ơ":"O","ớ":"o","Ớ":"O","ờ":"o","Ờ":"O","ợ":"o","Ợ":"O","ỡ":"o","Ỡ":"O","ị":"i","Ị":"I","ĩ":"i","Ĩ":"I","ụ":"u","Ụ":"U","ũ":"u","Ũ":"U","ư":"u","Ư":"U","ứ":"u","Ứ":"U","ừ":"u","Ừ":"U","ự":"u","Ự":"U","ữ":"u","Ữ":"U","ỳ":"y","Ỳ":"Y","ỵ":"y","Ỵ":"Y","ỹ":"y","Ỹ":"Y","ạ":"a","Ạ":"A","ấ":"a","Ấ":"A","ầ":"a","Ầ":"A","ậ":"a","Ậ":"A","ẫ":"a","Ẫ":"A","ă":"a","Ă":"A","ắ":"a","Ắ":"A","ằ":"a","Ằ":"A","ặ":"a","Ặ":"A","ẵ":"a","Ẵ":"A"},s={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}};if("undefined"!=typeof module&&module.exports)module.exports=t,module.exports.createSlug=e;else if("undefined"!=typeof define&&define.amd)define([],function(){return t});else try{if(window.getSlug||window.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";window.getSlug=t,window.createSlug=e}catch(o){}}(),$.validator&&$.validator.setDefaults({highlight:function(t){return $(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){return $(t).closest(".form-group").removeClass("has-error").find("help-block-hidden").removeClass("help-block-hidden").addClass("help-block").show()},errorElement:"div",errorClass:"jquery-validate-error",errorPlacement:function(t,e){var n,i,s;return s=e.is('input[type="checkbox"]')||e.is('input[type="radio"]'),i=e.closest(".form-group").find(".jquery-validate-error").length,s&&i?void 0:(i||e.closest(".form-group").find(".help-block").removeClass("help-block").addClass("help-block-hidden").hide(),t.addClass("help-block"),s?e.closest('[class*="col-"]').append(t):(n=e.parent(),n.is(".input-group")?n.parent().append(t):n.append(t)))}})}.call(this),function(){var t;t=function(e,n){return null==n&&(n={}),this.options=$.extend({},t.DEFAULTS,n||{}),this.$input=e,this.$el=$('<div class="pixel-file-input"><span class="pfi-filename"></span><div class="pfi-actions"></div></div>').insertAfter(e).append(e),this.$filename=$(".pfi-filename",this.$el),this.$clear_btn=$(this.options.clear_btn_tmpl).addClass("pfi-clear").appendTo($(".pfi-actions",this.$el)),this.$choose_btn=$(this.options.choose_btn_tmpl).addClass("pfi-choose").appendTo($(".pfi-actions",this.$el)),this.onChange(),e.on("change",function(t){return function(){return $.proxy(t.onChange,t)()}}(this)).on("click",function(t){return t.stopPropagation()}),this.$el.on("click",function(){return e.click()}),this.$choose_btn.on("click",function(t){return t.preventDefault()}),this.$clear_btn.on("click",function(t){return function(n){return e.wrap("<form>").parent("form").trigger("reset"),e.unwrap(),$.proxy(t.onChange,t)(),n.stopPropagation(),n.preventDefault()}}(this))},t.DEFAULTS={choose_btn_tmpl:'<a href="#" class="btn btn-xs btn-primary">Choose</a>',clear_btn_tmpl:'<a href="#" class="btn btn-xs"><i class="fa fa-times"></i> Clear</a>',placeholder:null},t.prototype.onChange=function(){var t;return t=this.$input.val().replace(/\\/g,"/"),""!==t?(this.$clear_btn.css("display","inline-block"),this.$filename.removeClass("pfi-placeholder"),this.$filename.text(t.split("/").pop())):(this.$clear_btn.css("display","none"),this.options.placeholder?(this.$filename.addClass("pfi-placeholder"),this.$filename.text(this.options.placeholder)):this.$filename.text(""))},$.fn.FileInput=function(e){return this.each(function(){return $.data(this,"FileInput")?void 0:$.data(this,"FileInput",new t($(this),e))})},$.fn.FileInput.Constructor=t}.call(this),function(t){function e(t,e,n){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:n;default:throw new Error("Implement me")}}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(t){_e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function s(t,e){var n=!0;return d(function(){return n&&(i(t),n=!1),e.apply(this,arguments)},e)}function o(t,e){pn[t]||(i(e),pn[t]=!0)}function a(t,e){return function(n){return p(t.call(this,n),e)}}function r(t,e){return function(n){return this.localeData().ordinal(t.call(this,n),e)}}function l(){}function c(t,e){e!==!1&&O(t),h(this,t),this._d=new Date(+t._d)}function u(t){var e=k(t),n=e.year||0,i=e.quarter||0,s=e.month||0,o=e.week||0,a=e.day||0,r=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*r,this._days=+a+7*o,this._months=+s+3*i+12*n,this._data={},this._locale=_e.localeData(),this._bubble()}function d(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e){var n,i,s;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Ye.length>0)for(n in Ye)i=Ye[n],s=e[i],"undefined"!=typeof s&&(t[i]=s);return t}function f(t){return 0>t?Math.ceil(t):Math.floor(t)}function p(t,e,n){for(var i=""+Math.abs(t),s=t>=0;i.length<e;)i="0"+i;return(s?n?"+":"":"-")+i}function m(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function g(t,e){var n;return e=L(e,t),t.isBefore(e)?n=m(t,e):(n=m(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function _(t,e){return function(n,i){var s,a;return null===i||isNaN(+i)||(o(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),a=n,n=i,i=a),n="string"==typeof n?+n:n,s=_e.duration(n,i),v(this,s,t),this}}function v(t,e,n,i){var s=e._milliseconds,o=e._days,a=e._months;i=null==i?!0:i,s&&t._d.setTime(+t._d+s*n),o&&de(t,"Date",ue(t,"Date")+o*n),a&&ce(t,ue(t,"Month")+a*n),i&&_e.updateOffset(t,o||a)}function y(t){return"[object Array]"===Object.prototype.toString.call(t)}function b(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function w(t,e,n){var i,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;s>i;i++)(n&&t[i]!==e[i]||!n&&M(t[i])!==M(e[i]))&&a++;return a+o}function C(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=rn[t]||ln[e]||e}return t}function k(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=C(n),e&&(i[e]=t[n]));return i}function $(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}_e[e]=function(s,o){var a,r,l=_e._locale[e],c=[];if("number"==typeof s&&(o=s,s=t),r=function(t){var e=_e().utc().set(i,t);return l.call(_e._locale,e,s||"")},null!=o)return r(o);for(a=0;n>a;a++)c.push(r(a));return c}}function M(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function S(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function D(t,e,n){return oe(_e([t,11,31+e-n]),e,n).week}function x(t){return T(t)?366:365}function T(t){return t%4===0&&t%100!==0||t%400===0}function O(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[$e]<0||t._a[$e]>11?$e:t._a[Me]<1||t._a[Me]>S(t._a[ke],t._a[$e])?Me:t._a[Se]<0||t._a[Se]>23?Se:t._a[De]<0||t._a[De]>59?De:t._a[xe]<0||t._a[xe]>59?xe:t._a[Te]<0||t._a[Te]>999?Te:-1,t._pf._overflowDayOfYear&&(ke>e||e>Me)&&(e=Me),t._pf.overflow=e)}function Y(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function E(t){return t?t.toLowerCase().replace("_","-"):t}function I(t){for(var e,n,i,s,o=0;o<t.length;){for(s=E(t[o]).split("-"),e=s.length,n=E(t[o+1]),n=n?n.split("-"):null;e>0;){if(i=A(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&w(s,n,!0)>=e-1)break;e--}o++}return null}function A(t){var e=null;if(!Oe[t]&&Ee)try{e=_e.locale(),require("./locale/"+t),_e.locale(e)}catch(n){}return Oe[t]}function L(t,e){return e._isUTC?_e(t).zone(e._offset||0):_e(t).local()}function F(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function j(t){var e,n,i=t.match(Fe);for(e=0,n=i.length;n>e;e++)i[e]=fn[i[e]]?fn[i[e]]:F(i[e]);return function(s){var o="";for(e=0;n>e;e++)o+=i[e]instanceof Function?i[e].call(s,t):i[e];return o}}function H(t,e){return t.isValid()?(e=z(e,t.localeData()),cn[e]||(cn[e]=j(e)),cn[e](t)):t.localeData().invalidDate()}function z(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(je.lastIndex=0;i>=0&&je.test(t);)t=t.replace(je,n),je.lastIndex=0,i-=1;return t}function N(t,e){var n,i=e._strict;switch(t){case"Q":return qe;case"DDDD":return Qe;case"YYYY":case"GGGG":case"gggg":return i?Ve:Ne;case"Y":case"G":case"g":return Je;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Xe:Re;case"S":if(i)return qe;case"SS":if(i)return Ze;case"SSS":if(i)return Qe;case"DDD":return ze;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ue;case"a":case"A":return e._locale._meridiemParse;case"X":return Ke;case"Z":case"ZZ":return We;case"T":return Ge;case"SSSS":return Pe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ze:He;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return He;case"Do":return Be;default:return n=new RegExp(Z(q(t.replace("\\","")),"i"))}}function R(t){t=t||"";var e=t.match(We)||[],n=e[e.length-1]||[],i=(n+"").match(on)||["-",0,0],s=+(60*i[1])+M(i[2]);return"+"===i[0]?-s:s}function P(t,e,n){var i,s=n._a;switch(t){case"Q":null!=e&&(s[$e]=3*(M(e)-1));break;case"M":case"MM":null!=e&&(s[$e]=M(e)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(e),null!=i?s[$e]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[Me]=M(e));break;case"Do":null!=e&&(s[Me]=M(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=M(e));break;case"YY":s[ke]=_e.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":s[ke]=M(e);break;case"a":case"A":n._isPm=n._locale.isPM(e);break;case"H":case"HH":case"h":case"hh":s[Se]=M(e);break;case"m":case"mm":s[De]=M(e);break;case"s":case"ss":s[xe]=M(e);break;case"S":case"SS":case"SSS":case"SSSS":s[Te]=M(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=R(e);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(e),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=M(e));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=_e.parseTwoDigitYear(e)}}function U(t){var n,i,s,o,a,r,l;n=t._w,null!=n.GG||null!=n.W||null!=n.E?(a=1,r=4,i=e(n.GG,t._a[ke],oe(_e(),1,4).year),s=e(n.W,1),o=e(n.E,1)):(a=t._locale._week.dow,r=t._locale._week.doy,i=e(n.gg,t._a[ke],oe(_e(),a,r).year),s=e(n.w,1),null!=n.d?(o=n.d,a>o&&++s):o=null!=n.e?n.e+a:a),l=ae(i,s,o,r,a),t._a[ke]=l.year,t._dayOfYear=l.dayOfYear}function W(t){var n,i,s,o,a=[];if(!t._d){for(s=K(t),t._w&&null==t._a[Me]&&null==t._a[$e]&&U(t),t._dayOfYear&&(o=e(t._a[ke],s[ke]),t._dayOfYear>x(o)&&(t._pf._overflowDayOfYear=!0),i=ee(o,0,t._dayOfYear),t._a[$e]=i.getUTCMonth(),t._a[Me]=i.getUTCDate()),n=0;3>n&&null==t._a[n];++n)t._a[n]=a[n]=s[n];for(;7>n;n++)t._a[n]=a[n]=null==t._a[n]?2===n?1:0:t._a[n];t._d=(t._useUTC?ee:te).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm)}}function G(t){var e;t._d||(e=k(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],W(t))}function K(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function B(t){if(t._f===_e.ISO_8601)return void V(t);t._a=[],t._pf.empty=!0;var e,n,i,s,o,a=""+t._i,r=a.length,l=0;for(i=z(t._f,t._locale).match(Fe)||[],e=0;e<i.length;e++)s=i[e],n=(a.match(N(s,t))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),l+=n.length),fn[s]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(s),P(s,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=r-l,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[Se]<12&&(t._a[Se]+=12),t._isPm===!1&&12===t._a[Se]&&(t._a[Se]=0),W(t),O(t)}function q(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,s){return e||n||i||s})}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(t){var e,i,s,o,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)a=0,e=h({},t),e._pf=n(),e._f=t._f[o],B(e),Y(e)&&(a+=e._pf.charsLeftOver,a+=10*e._pf.unusedTokens.length,e._pf.score=a,(null==s||s>a)&&(s=a,i=e));d(t,i||e)}function V(t){var e,n,i=t._i,s=tn.exec(i);if(s){for(t._pf.iso=!0,e=0,n=nn.length;n>e;e++)if(nn[e][1].exec(i)){t._f=nn[e][0]+(s[6]||" ");break}for(e=0,n=sn.length;n>e;e++)if(sn[e][1].exec(i)){t._f+=sn[e][0];break}i.match(We)&&(t._f+="Z"),B(t)}else t._isValid=!1}function X(t){V(t),t._isValid===!1&&(delete t._isValid,_e.createFromInputFallback(t))}function J(e){var n,i=e._i;i===t?e._d=new Date:b(i)?e._d=new Date(+i):null!==(n=Ie.exec(i))?e._d=new Date(+n[1]):"string"==typeof i?X(e):y(i)?(e._a=i.slice(0),W(e)):"object"==typeof i?G(e):"number"==typeof i?e._d=new Date(i):_e.createFromInputFallback(e)}function te(t,e,n,i,s,o,a){var r=new Date(t,e,n,i,s,o,a);return 1970>t&&r.setFullYear(t),r}function ee(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ne(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function ie(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}function se(t,e,n){var i=_e.duration(t).abs(),s=Ce(i.as("s")),o=Ce(i.as("m")),a=Ce(i.as("h")),r=Ce(i.as("d")),l=Ce(i.as("M")),c=Ce(i.as("y")),u=s<un.s&&["s",s]||1===o&&["m"]||o<un.m&&["mm",o]||1===a&&["h"]||a<un.h&&["hh",a]||1===r&&["d"]||r<un.d&&["dd",r]||1===l&&["M"]||l<un.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,ie.apply({},u)}function oe(t,e,n){var i,s=n-e,o=n-t.day();return o>s&&(o-=7),s-7>o&&(o+=7),i=_e(t).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ae(t,e,n,i,s){var o,a,r=ee(t,0,1).getUTCDay();return r=0===r?7:r,n=null!=n?n:s,o=s-r+(r>i?7:0)-(s>r?7:0),a=7*(e-1)+(n-s)+o+1,{year:a>0?t:t-1,dayOfYear:a>0?a:x(t-1)+a}}function re(e){var n=e._i,i=e._f;return e._locale=e._locale||_e.localeData(e._l),null===n||i===t&&""===n?_e.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),_e.isMoment(n)?new c(n,!0):(i?y(i)?Q(e):B(e):J(e),new c(e)))}function le(t,e){var n,i;if(1===e.length&&y(e[0])&&(e=e[0]),!e.length)return _e();for(n=e[0],i=1;i<e.length;++i)e[i][t](n)&&(n=e[i]);return n}function ce(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),S(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function ue(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function de(t,e,n){return"Month"===e?ce(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function he(t,e){return function(n){return null!=n?(de(this,t,n),_e.updateOffset(this,e),this):ue(this,t)}}function fe(t){return 400*t/146097}function pe(t){return 146097*t/400}function me(t){_e.duration.fn[t]=function(){return this._data[t]}}function ge(t){"undefined"==typeof ender&&(ve=we.moment,we.moment=t?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_e):_e)}for(var _e,ve,ye,be="2.8.1",we="undefined"!=typeof global?global:this,Ce=Math.round,ke=0,$e=1,Me=2,Se=3,De=4,xe=5,Te=6,Oe={},Ye=[],Ee="undefined"!=typeof module&&module.exports,Ie=/^\/?Date\((\-?\d+)/i,Ae=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Le=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Fe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,je=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,He=/\d\d?/,ze=/\d{1,3}/,Ne=/\d{1,4}/,Re=/[+\-]?\d{1,6}/,Pe=/\d+/,Ue=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,We=/Z|[\+\-]\d\d:?\d\d/gi,Ge=/T/i,Ke=/[\+\-]?\d+(\.\d{1,3})?/,Be=/\d{1,2}/,qe=/\d/,Ze=/\d\d/,Qe=/\d{3}/,Ve=/\d{4}/,Xe=/[+-]?\d{6}/,Je=/[+-]?\d+/,tn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,en="YYYY-MM-DDTHH:mm:ssZ",nn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],sn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],on=/([\+\-]|\d\d)/gi,an=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),rn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ln={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},cn={},un={s:45,m:45,h:22,d:26,M:11},dn="DDD w W M D d".split(" "),hn="M D H h m s w W".split(" "),fn={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)
},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+p(Math.abs(t),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return M(this.milliseconds()/100)},SS:function(){return p(M(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+p(M(t/60),2)+":"+p(M(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+p(M(t/60),2)+p(M(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},pn={},mn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dn.length;)ye=dn.pop(),fn[ye+"o"]=r(fn[ye],ye);for(;hn.length;)ye=hn.pop(),fn[ye+ye]=a(fn[ye],2);fn.DDDD=a(fn.DDD,3),d(l.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=_e.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=_e([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var s=this._relativeTime[n];return"function"==typeof s?s(t,e,n,i):s.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return oe(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_e=function(e,i,s,o){var a;return"boolean"==typeof s&&(o=s,s=t),a={},a._isAMomentObject=!0,a._i=e,a._f=i,a._l=s,a._strict=o,a._isUTC=!1,a._pf=n(),re(a)},_e.suppressDeprecationWarnings=!1,_e.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),_e.min=function(){var t=[].slice.call(arguments,0);return le("isBefore",t)},_e.max=function(){var t=[].slice.call(arguments,0);return le("isAfter",t)},_e.utc=function(e,i,s,o){var a;return"boolean"==typeof s&&(o=s,s=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=s,a._i=e,a._f=i,a._strict=o,a._pf=n(),re(a).utc()},_e.unix=function(t){return _e(1e3*t)},_e.duration=function(t,e){var n,i,s,o,a=t,r=null;return _e.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(r=Ae.exec(t))?(n="-"===r[1]?-1:1,a={y:0,d:M(r[Me])*n,h:M(r[Se])*n,m:M(r[De])*n,s:M(r[xe])*n,ms:M(r[Te])*n}):(r=Le.exec(t))?(n="-"===r[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},a={y:s(r[2]),M:s(r[3]),d:s(r[4]),h:s(r[5]),m:s(r[6]),s:s(r[7]),w:s(r[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(o=g(_e(a.from),_e(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),i=new u(a),_e.isDuration(t)&&t.hasOwnProperty("_locale")&&(i._locale=t._locale),i},_e.version=be,_e.defaultFormat=en,_e.ISO_8601=function(){},_e.momentProperties=Ye,_e.updateOffset=function(){},_e.relativeTimeThreshold=function(e,n){return un[e]===t?!1:n===t?un[e]:(un[e]=n,!0)},_e.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return _e.locale(t,e)}),_e.locale=function(t,e){var n;return t&&(n="undefined"!=typeof e?_e.defineLocale(t,e):_e.localeData(t),n&&(_e.duration._locale=_e._locale=n)),_e._locale._abbr},_e.defineLocale=function(t,e){return null!==e?(e.abbr=t,Oe[t]||(Oe[t]=new l),Oe[t].set(e),_e.locale(t),Oe[t]):(delete Oe[t],null)},_e.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(t){return _e.localeData(t)}),_e.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return _e._locale;if(!y(t)){if(e=A(t))return e;t=[t]}return I(t)},_e.isMoment=function(t){return t instanceof c||null!=t&&t.hasOwnProperty("_isAMomentObject")},_e.isDuration=function(t){return t instanceof u};for(ye=mn.length-1;ye>=0;--ye)$(mn[ye]);_e.normalizeUnits=function(t){return C(t)},_e.invalid=function(t){var e=_e.utc(0/0);return null!=t?d(e._pf,t):e._pf.userInvalidated=!0,e},_e.parseZone=function(){return _e.apply(null,arguments).parseZone()},_e.parseTwoDigitYear=function(t){return M(t)+(M(t)>68?1900:2e3)},d(_e.fn=c.prototype,{clone:function(){return _e(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=_e(this).utc();return 0<t.year()&&t.year()<=9999?H(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return Y(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?_e.utc(this._a):_e(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.zone(0,t)},local:function(t){return this._isUTC&&(this.zone(0,t),this._isUTC=!1,t&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(t){var e=H(this,t||_e.defaultFormat);return this.localeData().postformat(e)},add:_(1,"add"),subtract:_(-1,"subtract"),diff:function(t,e,n){var i,s,o=L(t,this),a=6e4*(this.zone()-o.zone());return e=C(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-_e(this).startOf("month")-(o-_e(o).startOf("month")))/i,s-=6e4*(this.zone()-_e(this).startOf("month").zone()-(o.zone()-_e(o).startOf("month").zone()))/i,"year"===e&&(s/=12)):(i=this-o,s="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?s:f(s)},from:function(t,e){return _e.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(_e(),t)},calendar:function(t){var e=t||_e(),n=L(e,this).startOf("day"),i=this.diff(n,"days",!0),s=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this))},isLeapYear:function(){return T(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ne(t,this.localeData()),this.add(t-e,"d")):e},month:he("Month",!0),startOf:function(t){switch(t=C(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=C(t),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+_e(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+_e(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+L(t,this).startOf(e)},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=_e.apply(null,arguments),this>t?this:t}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=_e.apply(null,arguments),t>this?this:t}),zone:function(t,e){var n,i=this._offset||0;return null==t?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof t&&(t=R(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(n=this._d.getTimezoneOffset()),this._offset=t,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==t&&(!e||this._changeInProgress?v(this,_e.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_e.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?_e(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return S(this.year(),this.month())},dayOfYear:function(t){var e=Ce((_e(this).startOf("day")-_e(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=oe(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=oe(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=oe(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return D(this.year(),t.dow,t.doy)},get:function(t){return t=C(t),this[t]()},set:function(t,e){return t=C(t),"function"==typeof this[t]&&this[t](e),this},locale:function(e){return e===t?this._locale._abbr:(this._locale=_e.localeData(e),this)},lang:s("moment().lang() is deprecated. Use moment().localeData() instead.",function(e){return e===t?this.localeData():(this._locale=_e.localeData(e),this)}),localeData:function(){return this._locale}}),_e.fn.millisecond=_e.fn.milliseconds=he("Milliseconds",!1),_e.fn.second=_e.fn.seconds=he("Seconds",!1),_e.fn.minute=_e.fn.minutes=he("Minutes",!1),_e.fn.hour=_e.fn.hours=he("Hours",!0),_e.fn.date=he("Date",!0),_e.fn.dates=s("dates accessor is deprecated. Use date instead.",he("Date",!0)),_e.fn.year=he("FullYear",!0),_e.fn.years=s("years accessor is deprecated. Use year instead.",he("FullYear",!0)),_e.fn.days=_e.fn.day,_e.fn.months=_e.fn.month,_e.fn.weeks=_e.fn.week,_e.fn.isoWeeks=_e.fn.isoWeek,_e.fn.quarters=_e.fn.quarter,_e.fn.toJSON=_e.fn.toISOString,d(_e.duration.fn=u.prototype,{_bubble:function(){var t,e,n,i=this._milliseconds,s=this._days,o=this._months,a=this._data,r=0;a.milliseconds=i%1e3,t=f(i/1e3),a.seconds=t%60,e=f(t/60),a.minutes=e%60,n=f(e/60),a.hours=n%24,s+=f(n/24),r=f(fe(s)),s-=f(pe(r)),o+=f(s/30),s%=30,r+=f(o/12),o%=12,a.days=s,a.months=o,a.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12)},humanize:function(t){var e=se(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var n=_e.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=_e.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=C(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,n;if(t=C(t),e=this._days+this._milliseconds/864e5,"month"===t||"year"===t)return n=this._months+12*fe(e),"month"===t?n:n/12;switch(e+=pe(this._months/12),t){case"week":return e/7;case"day":return e;case"hour":return 24*e;case"minute":return 24*e*60;case"second":return 24*e*60*60;case"millisecond":return 24*e*60*60*1e3;default:throw new Error("Unknown unit "+t)}},lang:_e.fn.lang,locale:_e.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||s||o?"T":"")+(i?i+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}});for(ye in an)an.hasOwnProperty(ye)&&me(ye.toLowerCase());_e.duration.fn.asMilliseconds=function(){return this.as("ms")},_e.duration.fn.asSeconds=function(){return this.as("s")},_e.duration.fn.asMinutes=function(){return this.as("m")},_e.duration.fn.asHours=function(){return this.as("h")},_e.duration.fn.asDays=function(){return this.as("d")},_e.duration.fn.asWeeks=function(){return this.as("weeks")},_e.duration.fn.asMonths=function(){return this.as("M")},_e.duration.fn.asYears=function(){return this.as("y")},_e.locale("en",{ordinal:function(t){var e=t%10,n=1===M(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),function(t){t(_e)}(function(t){function e(t,e){var n=t.split("_");return e%10===1&&e%100!==11?n[0]:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?n[1]:n[2]}function n(t,n,i){var s={mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===i?n?"минута":"минуту":t+" "+e(s[i],+t)}function i(t,e){var n={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return n[i][t.month()]}function s(t,e){var n={nominative:"янв_фев_мар_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return n[i][t.month()]}function o(t,e){var n={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},i=/\[ ?[Вв] ?(?:прошлую|следующую)? ?\] ?dddd/.test(e)?"accusative":"nominative";return n[i][t.day()]}return t.defineLocale("ru-ru",{months:i,monthsShort:s,weekdays:o,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:n,mm:n,h:"час",hh:n,d:"день",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t){return 4>t?"ночи":12>t?"утра":17>t?"дня":"вечера"},ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:7}})}),_e.locale(LOCALE),Ee?module.exports=_e:"function"==typeof define&&define.amd?(define("moment",function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(we.moment=ve),_e}),ge(!0)):ge()}.call(this),function(){var t;t=function(e,n){return null==n&&(n={}),this.options=$.extend({},t.DEFAULTS,n||{}),this.$container=e,this.$target=this.options.target&&this.$container.find(this.options.target).length?this.$container.find(this.options.target):null,this.$content=this.options.hidden_content&&this.$container.find(this.options.hidden_content).length?this.$container.find(this.options.hidden_content):null,this.$container.addClass("expanding-input"),this.$target&&(this.$target.addClass("expanding-input-target"),this.$target.hasClass("input-sm")&&this.$container.addClass("expanding-input-sm"),this.$target.hasClass("input-lg")&&this.$container.addClass("expanding-input-lg")),this.$content&&this.$content.addClass("expanding-input-content"),this.$overlay=$('<div class="expanding-input-overlay"></div>').appendTo(this.$container),this.$target&&this.$target.attr("placeholder")&&(this.options.placeholder||(this.options.placeholder=this.$target.attr("placeholder")),this.$target.attr("placeholder","")),this.options.placeholder&&this.$overlay.append($('<div class="expanding-input-placeholder"></div>').html(this.options.placeholder)),this.$target&&this.$target.on("focus",$.proxy(this.expand,this)),this.$overlay.on("click.expanding_input",$.proxy(this.expand,this))},t.prototype.expand=function(){return this.$container.hasClass("expanded")?void 0:(this.options.onBeforeExpand&&this.options.onBeforeExpand.call(this),this.$overlay.remove(),this.$container.addClass("expanded"),this.$target&&setTimeout(function(t){return function(){return t.$target.focus()}}(this),1),this.$target&&this.options.placeholder&&this.$target.attr("placeholder",$("<div>"+this.options.placeholder+"</div>").text()),this.options.onAfterExpand?this.options.onAfterExpand.call(this):void 0)},t.DEFAULTS={target:null,hidden_content:null,placeholder:null,onBeforeExpand:null,onAfterExpand:null},$.fn.expandingInput=function(e){return this.each(function(){var n;return n=$(this),n.attr("data-expandingInput")?void 0:$.data(n,"expandingInput",new t(n,e))})},$.fn.expandingInput.Constructor=t}.call(this),function(){!new function(t){var e=t.separator||"&",n=t.spaces===!1?!1:!0,i=(t.suffix===!1?"":"[]",t.prefix===!1?!1:!0),s=i?t.hash===!0?"#":"?":"",o=t.numbers===!1?!1:!0;jQuery.query=new function(){var t=function(t,e){return void 0!=t&&null!==t&&(e?t.constructor==e:!0)},i=function(t){for(var e,n=/\[([^[]*)\]/g,i=/^([^[]+)(\[.*\])?$/.exec(t),s=i[1],o=[];e=n.exec(i[2]);)o.push(e[1]);return[s,o]},a=function(e,n,i){var s=n.shift();if("object"!=typeof e&&(e=null),""===s)if(e||(e=[]),t(e,Array))e.push(0==n.length?i:a(null,n.slice(0),i));else if(t(e,Object)){for(var o=0;null!=e[o++];);e[--o]=0==n.length?i:a(e[o],n.slice(0),i)}else e=[],e.push(0==n.length?i:a(null,n.slice(0),i));else if(s&&s.match(/^\s*[0-9]+\s*$/)){var r=parseInt(s,10);e||(e=[]),e[r]=0==n.length?i:a(e[r],n.slice(0),i)}else{if(!s)return i;var r=s.replace(/^\s*|\s*$/g,"");if(e||(e={}),t(e,Array)){for(var l={},o=0;o<e.length;++o)l[o]=e[o];e=l}e[r]=0==n.length?i:a(e[r],n.slice(0),i)}return e},r=function(t){var e=this;return e.keys={},t.queryObject?jQuery.each(t.get(),function(t,n){e.SET(t,n)}):e.parseNew.apply(e,arguments),e};return r.prototype={queryObject:!0,parseNew:function(){var t=this;return t.keys={},jQuery.each(arguments,function(){var e=""+this;e=e.replace(/^[?#]/,""),e=e.replace(/[;&]$/,""),n&&(e=e.replace(/[+]/g," ")),jQuery.each(e.split(/[&;]/),function(){var e=decodeURIComponent(this.split("=")[0]||""),n=decodeURIComponent(this.split("=")[1]||"");e&&(o&&(/^[+-]?[0-9]+\.[0-9]*$/.test(n)?n=parseFloat(n):/^[+-]?[0-9]+$/.test(n)&&(n=parseInt(n,10))),n=n||0===n?n:!0,t.SET(e,n))})}),t},has:function(e,n){var i=this.get(e);return t(i,n)},GET:function(e){if(!t(e))return this.keys;for(var n=i(e),s=n[0],o=n[1],a=this.keys[s];null!=a&&0!=o.length;)a=a[o.shift()];return"number"==typeof a?a:a||""},get:function(e){var n=this.GET(e);return t(n,Object)?jQuery.extend(!0,{},n):t(n,Array)?n.slice(0):n},SET:function(e,n){var s=t(n)?n:null,o=i(e),r=o[0],l=o[1],c=this.keys[r];return this.keys[r]=a(c,l.slice(0),s),this},set:function(t,e){return this.copy().SET(t,e)},REMOVE:function(t){return this.SET(t,null).COMPACT()},remove:function(t){return this.copy().REMOVE(t)},EMPTY:function(){var t=this;return jQuery.each(t.keys,function(e){delete t.keys[e]}),t},load:function(t){var e=t.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new r(t.length==e.length?"":e)},empty:function(){return this.copy().EMPTY()},copy:function(){return new r(this)},COMPACT:function(){function e(n){function i(e,n,i){t(e,Array)?e.push(i):e[n]=i}var s="object"==typeof n?t(n,Array)?[]:{}:n;return"object"==typeof n&&jQuery.each(n,function(n,o){return t(o)?void i(s,n,e(o)):!0}),s}return this.keys=e(this.keys),this},compact:function(){return this.copy().COMPACT()},toString:function(){var i=[],o=[],a=function(t){return t+="",n&&(t=t.replace(/ /g,"+")),encodeURIComponent(t)},r=function(e,n,i){if(t(i)&&i!==!1){var s=[a(n)];i!==!0&&(s.push("="),s.push(a(i))),e.push(s.join(""))}},l=function(t,e){var n=function(t){return e&&""!=e?[e,"[",t,"]"].join(""):[t].join("")};jQuery.each(t,function(t,e){"object"==typeof e?l(e,n(t)):r(o,n(t),e)})};return l(this.keys),o.length>0&&i.push(s),i.push(o.join(e)),i.join("")}},new r(location.search,location.hash)}}(jQuery.query||{})}.call(this);var cms={models:{},views:{},collections:{},routes:{},settings:{},popup_target:null,messages:{init:function(){this.parse(MESSAGE_ERRORS,"error"),this.parse(MESSAGE_SUCCESS),$("body").on("show_message",function(){var t=_.toArray(arguments).slice(1);cms.messages.parse(t)})},parse:function(t,e){for(text in t)"_external"!=text?("error"==e&&cms.error_field(text,decodeURIComponent(t[text])),this.show(t[text],e)):this.parse(t[text],e)},show:function(t,e){e||(e="success");var n=e.charAt(0).toUpperCase()+e.slice(1);window.top.$.pnotify({title:__(n),text:decodeURIComponent(t),sticker:!1,nonblock:!0,delay:4e3,type:e,history:!1})},error:function(t){this.show(t,"error")}},notifications:{_init:!1,_list:[],counter:0,container:"#notifications-container",add:function(t,e,n,i,s,o){this._list.push([t,moment(e),n,i,s,o])},update_counter:function(){this.counter++},init:function(){this._build(),$(".notifications-list",this.container).slimScroll({height:250}),this._init=!0},_build_row:function(t){var e=t[0],n=t[1].fromNow(),i=t[2],s=t[3],o=t[4],a=$('<div class="notification" />');if(!s)var s="";return i&&$('<div class="notification-title '+s+'" />').text(__(i).toUpperCase()).prependTo(a),e&&$('<div class="notification-description" />').html(e).appendTo(a),n&&$('<div class="notification-ago margin-xs-vr" />').html(n).appendTo(a),o&&$('<div class="notification-icon fa fa-'+o+'" />').appendTo(a),a},_build:function(){var t=$(".notifications-list",this.container);this._list=_.sortBy(this._list,function(t){return!t[1].unix()});for(i in this._list)$notification=this._build_row(this._list[i]),$notification.prependTo(t),this._list[i][5]!==!1&&this.update_counter(),delete this._list[i];$(".counter",this.container).text(parseInt(this.counter))}},error_field:function(t,e){var n=$(".form-group:not(.has-error)");if("object"==typeof t)var i=t;else{t=-1!==t.indexOf(".")?"["+t.replace(/\./g,"][")+"]":t;var i=$(':input[name*="'+t+'"]',n)}i.after('<span class="help-block error-message">'+e+"</span>").closest(".form-group").addClass("has-error");var s=i.closest(".tab-pane").prop("id");if(s){var o=$('.nav-tabs a[href="#'+s+'"]').addClass("tab-error");o.closest(".tabdrop").find(".dropdown-toggle").addClass("tab-error")}},clear_error:function(t,e){var n=$(".form-group");"object"==typeof t&&(n=$(".form-group",t)),n.removeClass("has-error").find(".error-message").remove(),e!==!1&&$(".nav-tabs li a").removeClass("tab-error")},loader:{counter:0,init:function(t){return t=$("body"),$('<div class="_loader_container"><span>'+__("Loading")+"</span></div>").appendTo(t).css({width:t.outerWidth(!0),height:t.outerHeight(!0),top:t.offset().top,left:t.offset().left}).prop("id","loader"+ ++this.counter)},show:function(t,e){e||(e=500);this.init(t).fadeTo(e,.4);return this.counter},hide:function(t){cont=$(t?"#loader"+t:"._loader_container"),cont.stop().fadeOut(400,function(){$(this).remove()})}},content_height:null,calculateContentHeight:function(){if(null!=this.content_height)return this.content_height;var t=$("#content-wrapper"),e=$("#main-navbar"),n=($("footer"),$(window)),i=n.outerHeight()-e.outerHeight(),s=t.outerHeight(!$("body").hasClass("iframe"))-t.innerHeight()+$("body").hasClass("iframe")?0:140;return this.content_height=i-s,this.content_height},translations:{},plugins:{},filters:{filters:[],switchedOn:{},editors:{},add:function(t,e,n,i){return void 0==e||void 0==n?void cms.messages.error("System try to add filter without required callbacks.",t,e,n):void this.filters.push([t,e,n,i])},switchOn:function(t,e,n){if($("#"+t).css("display","block"),this.filters.length>0){for(var i=this.get(t),s=null,o=0;o<this.filters.length;o++)if(this.filters[o][0]==e){s=this.filters[o];break}i!==s&&this.switchOff(t);try{this.switchedOn[t]=s,this.editors[t]=s[1](t,n),$("#"+t).trigger("filter:switch:on",this.editors[t])}catch(a){}}},switchOff:function(t){var e=this.get(t);try{e&&"function"==typeof e[2]&&e[2](this.editors[t],t),this.switchedOn[t]=null,$("#"+t).trigger("filter:switch:off")}catch(n){}},get:function(t){for(var e in this.switchedOn)if(e==t)return this.switchedOn[e];return null},exec:function(t,e,n){var i=this.get(t);return i&&"function"==typeof i[3]?i[3](this.editors[t],e,t,n):!1}},filemanager:{open:function(t){return $.fancybox.open({href:BASE_URL+"/elfinder/",type:"iframe"},{autoSize:!1,width:1e3,afterLoad:function(){this.content[0].contentWindow.elfinderInit({getFileCallback:function(e){_.isObject(e)&&(e=e.url),_.isObject(t)?(t.val(e),window.top.$.fancybox.close()):window.top.cms.filters.exec(t,"insert",e)&&window.top.$.fancybox.close()}})}})}}};cms.addTranslation=function(t){for(var e in t)cms.translations[e]=t[e]},cms.ui={callbacks:[],add:function(t,e){return"function"!=typeof e?this:(cms.ui.callbacks.push([t,e]),this)},init:function(t){$("body").trigger("before_ui_init");for(var e=0;e<cms.ui.callbacks.length;e++)try{t?_.isArray(t)&&-1!=_.indexOf(t,cms.ui.callbacks[e][0])?cms.ui.callbacks[e][1]():t==cms.ui.callbacks[e][0]&&cms.ui.callbacks[e][1]():cms.ui.callbacks[e][1]()}catch(n){console.log(cms.ui.callbacks[e][0],n)}$("body").trigger("after_ui_init")}},cms.init={callbacks:[],add:function(t,e){if("function"!=typeof e)return this;if("object"==typeof t)for(var n=0;n<t.length;n++)cms.init.callbacks.push([t[n],e]);else"string"==typeof t&&cms.init.callbacks.push([t,e]);return cms.init.callbacks.reverse(),this},run:function(){$("body").trigger("before_cms_init");for(var t=$("body:first").attr("id"),e=0;e<cms.init.callbacks.length;e++){var n="body_"+cms.init.callbacks[e][0];t==n&&cms.init.callbacks[e][1]()}$("body").trigger("after_cms_init")}},cms.ui.add("flags",function(){$("body").on("click",".flags .label",function(t){var e=$(this).parent().data("target");e=e?$(e):$(this).parent().prevAll(":input");var n=$(this).parent(),s=1==n.data("append"),o=1==n.data("array"),a=$(this).data("value");if(o&&(a=a.split(",")),s){if(e.is(":input")){var r=e.val().split(", ");r.push(a),r=_.uniq(_.compact(r)),e.val(r.join(", "))}else{var r=e.text().split(", ");r.push(a),r=_.uniq(_.compact(r)),e.text(r.join(", "))}$(".label",n).removeClass("label-success");for(i in r)$('.label[data-value="'+r[i]+'"]').addClass("label-success")}else $(".label",n).removeClass("label-success"),$(this).addClass("label-success"),e.hasClass("select2-offscreen")?e.select2("val",a):e.is(":input")?e.val(a):e.text(a);t.preventDefault()})}).add("btn-confirm",function(){$("body").on("click",".btn-confirm",function(t){confirm(__("Are you sure?"))||t.preventDefault()})}).add("calculate_height",function(){cms.calculateContentHeight(),$(window).resize(function(){cms.content_height=null,cms.calculateContentHeight()})}).add("panel-toggler",function(){var t="fa-chevron-up",e="fa-chevron-down";$(".panel-toggler").click(function(){var n=$(this);if(n.data("target-"))i=$(n.data("target-"));else var i=n.next(".panel-spoiler");return i.slideToggle("fast",function(){var i=n.find(".panel-toggler-icon");$(this).is(":hidden")?i.removeClass(t).addClass(e).addClass("fa"):i.addClass(t).removeClass(e).addClass("fa")}),!1}).each(function(){$(this).data("hash")==window.location.hash.substring(1)&&($(this).click(),$("html,body").animate({scrollTop:$(this).offset().top},"slow"))}).append('<div class="panel-heading-controls"><span class="text-sm"><i class="panel-toggler-icon fa '+e+'" />&nbsp;&nbsp;&nbsp;'+__("Toggle")+"</span></div>")}).add("datepicker",function(){var t={format:"Y-m-d H:i:00",lang:LOCALE,dayOfWeekStart:1};$(".datetimepicker").each(function(){var e=$.extend({},t),n=$(this);n.data("range-max-input")&&(e.onShow=function(){var t=$(n.data("range-max-input"));this.setOptions({maxDate:t.val()?t.val():!1})}),n.data("range-min-input")&&(e.onShow=function(){var t=$(n.data("range-min-input"));
this.setOptions({minDate:t.val()?t.val():!1})}),n.datetimepicker(e)}),$(".datepicker").each(function(){var e=$.extend(t,{timepicker:!1,format:"Y-m-d"}),n=$(this);n.data("range-max-input")?e.onShow=function(){var t=$(n.data("range-max-input"));this.setOptions({maxDate:t.val()?t.val():!1})}:n.data("range-min-input")&&(e.onShow=function(){var t=$(n.data("range-min-input"));this.setOptions({minDate:t.val()?t.val():!1})}),n.datetimepicker(e)}),$(".timepicker").each(function(){var e=$.extend(t,{timepicker:!0,datepicker:!1,format:"H:i:s"}),n=$(this);n.datetimepicker(e)})}).add("slug",function(){var t={};$("body").on("keyup",".slug-generator",function(){var e=$(".slug");if($(this).data("slug")&&(e=$($(this).data("slug"))),$separator="-",$(this).data("separator")&&($separator=$(this).data("separator")),e.is(":input")&&""==e.val()&&(t[e]=!0),e.on("keyup",function(){t[e]=!1}),t[e]){var n=getSlug($(this).val(),{separator:$separator});e.is(":input")?e.val(n):e.text(n)}}),$("body").on("keyup",".slug",function(){var e=String.fromCharCode(event.keyCode),n=e.match(/\w/);if(n||"32"==event.keyCode){$separator="-",$(this).data("separator")&&($separator=$(this).data("separator"));var i=getSlug($(this).val(),{separator:$separator});$(this).val(i),t[$(this)]=!1,""==$(this).val()&&(t[$(this)]=!0)}})}).add("dropzone",function(){Dropzone.autoDiscover=!1,$(".dropzone").length&&(cms.uploader=new Dropzone(".dropzone",{success:function(t,e){var n=$.parseJSON(e),i=this;200!=n.code?cms.messages.error(n.message):n.message&&cms.messages.show(n.message),$(t.previewElement).fadeOut(500,function(){i.removeFile(t)})},error:function(t,e){cms.messages.error(e),this.removeFile(t)},dictDefaultMessage:__("Drop files here to upload"),dictFallbackMessage:__("Your browser does not support drag'n'drop file uploads."),dictFallbackText:__("Please use the fallback form below to upload your files like in the olden days."),dictFileTooBig:__("File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB."),dictInvalidFileType:__("You can't upload files of this type."),dictResponseError:__("Server responded with {{statusCode}} code."),dictCancelUpload:__("Cancel upload"),dictCancelUploadConfirmation:__("Are you sure you want to cancel this upload?"),dictRemoveFile:__("Remove file"),dictMaxFilesExceeded:__("You can only upload {{maxFiles}} files.")}))}).add("fancybox",function(){$(".fancybox-image").fancybox()}).add("popup",function(){$(".popup").fancybox({fitToView:!0,autoSize:!1,width:"99%",height:"99%",openEffect:"none",closeEffect:"none",beforeLoad:function(){var t=this.href.split("?")[0],e=$.query.load(this.href).set("type","iframe").toString();this.href=t+e;var n=this.element.data("title");n!==!1&&(this.title=n?n:this.element.html()),cms.popup_target=this.element},helpers:{title:{type:"inside",position:"top"}}});var t="add"==ACTION?"put":"post",e=$(".iframe .form-actions"),n=CONTROLLER;"undefined"!=typeof API_FORM_ACTION&&(n=API_FORM_ACTION),$(".btn-save",e).on("click",function(e){var i=$("form").serializeObject();Api[t](n,i),e.preventDefault()}),$(".btn-save-close",e).on("click",function(e){var i=$("form").serializeObject();Api[t](n,i,function(){window.top.$.fancybox.close()}),e.preventDefault()}),$(".btn-close",e).on("click",function(t){window.top.$.fancybox.close(),t.preventDefault()}),CLOSE_POPUP&&setTimeout(function(){window.top.$.fancybox.close()},1e3)}).add("select2",function(){if(!t)var t=",";$("select").not(".no-script").select2(),$(".tags").select2({tags:[],minimumInputLength:0,tokenSeparators:[t],createSearchChoice:function(t,e){return 0===$(e).filter(function(){return 0===this.text.localeCompare(t)}).length?{id:t,text:t}:void 0},multiple:!0,ajax:{url:Api.build_url("tags"),dataType:"json",data:function(t){return{term:t}},results:function(t){return t.response?{results:t.response}:{results:[]}}},initSelection:function(t,e){var n=[],s=t.val().split(",");for(i in s)n.push({id:s[i],text:s[i]});e(n)}})}).add("ajax_form",function(){$("body").on("submit","form.form-ajax",function(){var t=$(this),e=$("button",t).attr("disabled","disabled"),n=t.attr("action");return t.data("ajax-action")&&(n=t.data("ajax-action")),Api.post(n,t.serialize(),function(){setTimeout(function(){e.removeAttr("disabled")},5e3)}),!1})}).add("filemanager",function(){var t=$(":input[data-filemanager]");t.each(function(){var t=$(this),e=$('<button class="btn" type="button"><i class="fa fa-folder-open"></i></button>');t.next().hasClass("input-group-btn")?e.prependTo(t.next()):e.insertAfter(t),e.on("click",function(){cms.filemanager.open(t)}),t.removeAttr("data-filemanager")}),$("body").on("click",".btn-filemanager",function(){var t=$(this).data("el"),e=$(this).data("type");return t?(cms.filemanager.open(t,e),!1):!1})}).add("hotkeys",function(){$("*[data-hotkeys]").each(function(){var t=$(this),e=t.data("hotkeys"),n=function(t){t.preventDefault()};t.is(":submit")||t.hasClass("popup")?n=function(e){t.trigger("click"),e.preventDefault()}:t.attr("href")?n=function(e){return t.hasClass("btn-confirm")&&!confirm(__("Are you sure?"))?!1:(window.location=t.attr("href"),void e.preventDefault())}:t.hasClass("panel-toggler")?n=function(e){t.trigger("click"),$("body").scrollTo(t),e.preventDefault()}:t.hasClass("nav-tabs")?n=function(e){var n=t.find("li.active"),i=n.next();i.hasClass("nav-section")&&(i=i.next()),n.is(":last-child")&&(i=t.parent().find("li:first-child")),i.find("a").trigger("click"),e.preventDefault()}:t.is(":checkbox")&&(n=function(e){t.prop("checked")?t.uncheck().trigger("change"):t.check().trigger("change"),e.preventDefault()}),$(document).on("keydown",null,e,n)}),$(document).on("keydown",null,"shift+f1",function(t){Api["delete"]("cache"),t.preventDefault()}),$(document).on("keydown",null,"shift+f3",function(t){Api.get("search.update_index"),t.preventDefault()}),$(document).on("keydown",null,"shift+f4",function(t){Api.post("layout.rebuild"),t.preventDefault()}),$(document).on("keydown",null,"ctrl+shift+l",function(t){window.location="/backend/logout",t.preventDefault()})}).add("api_buttons",function(){$(".btn[data-api-url]").on("click",function(t){t.preventDefault();var e=$(this),n=function(){},i=e.data("api-url");if(i){var n=e.data("callback");n=n?window[n]:function(){};var s=e.data("method"),o=e.data("reload"),a=e.data("params");o&&(n=o===!0?function(){window.location=""}:function(){window.location=o}),s||(s="GET"),Api.request(s,i,a,n)}})}).add("select_all_checkbox",function(){$(document).on("change",'input[name="check_all"]',function(t){var e=$(this),n=e.data("target");return n?($(n).prop("checked",this.checked).trigger("change"),void t.preventDefault()):!1})}).add("icon",function(){$("*[data-icon]").add("*[data-icon-prepend]").each(function(){$(this).html('<i class="fa fa-'+$(this).data("icon")+'"></i> '+$(this).html()),$(this).removeAttr("data-icon-prepend").removeAttr("data-icon")}),$("*[data-icon-append]").each(function(){$(this).html($(this).html()+'&nbsp&nbsp<i class="fa fa-'+$(this).data("icon-append")+'"></i>'),$(this).removeAttr("data-icon-append")})}).add("tabbable",function(){$(".tabbable").each(function(t){var e=$(this);if($("> .panel-heading",e).size()>0){var n=$('<div class="tab-content no-padding-t" />').prependTo(e),i=$('<ul class="nav nav-tabs tabs-generated" style="position:relative; margin-top: 10px;" />').insertBefore(e);$("> .panel-heading",e).each(function(e){var s=$("<li></li>").appendTo(i),o=$(this).nextUntil(".panel-heading").not(".panel-footer").removeClass("panel-spoiler");$(this).find(".panel-title").removeClass("panel-title"),$(this).find(".panel-heading-controls").remove();$('<div class="tab-pane" id="panel-tab-'+t+e+'" />').append(o).appendTo(n);$('<a href="#panel-tab-'+t+e+'" data-toggle="tab"></a>').html($(this).html()).appendTo(s),$(this).remove()}),$("li a",i).on("click",function(){window.location.hash=$(this).attr("href")})}}),window.location.hash.length>0&&$(".tabs-generated li a[href="+window.location.hash+"]").length>0?($("li a[href="+window.location.hash+"]").parent().addClass("active"),$(".tabbable .tab-pane"+window.location.hash).addClass("active")):($(".tabs-generated li:first-child").addClass("active"),$(".tabbable .tab-pane:first-child").addClass("active")),$(".tabs-generated").tabdrop()});var Api={_response:null,get:function(t,e,n,i){var s=this.request("GET",t,e,n,i);return i===!1&&(this._response=s.responseJSON),this.response()},post:function(t,e,n,i){var s=this.request("POST",t,e,n,i);return i===!1&&(this._response=s.responseJSON),this.response()},put:function(t,e,n,i){var s=this.request("PUT",t,e,n,i);return i===!1&&(this._response=s.responseJSON),this.response()},"delete":function(t,e,n,i){var s=this.request("DELETE",t,e,n,i);return i===!1&&(this._response=s.responseJSON),this.response()},request:function(t,e,n,i,s){url=Api.build_url(e);new Object;return $.ajaxSetup({contentType:"application/json"}),"object"==typeof n&&"GET"!=t&&(n=JSON.stringify(n)),$.ajax({type:t,url:url,data:n,dataType:"json",async:s!==!1,success:function(e){if(200!=e.code)return"function"==typeof i&&i(e),Api.exception(e);e.message&&(cms.clear_error(),e.message instanceof Object?cms.messages.parse(e.message):cms.messages.show(e.message)),e.redirect&&$.get(window.top.CURRENT_URL,function(){window.location=e.redirect+"?type=iframe"}),this._response=e;var n=t+url.replace(SITE_URL,":").replace(/\//g,":");window.top.$("body").trigger(n.toLowerCase(),[this._response.response]),"function"==typeof i&&i(this._response)},error:function(t,e){"function"==typeof i&&i(e)}})},build_url:function(t){return-1!==t.indexOf(ADMIN_DIR_NAME)&&(t=t.substring(t.indexOf(ADMIN_DIR_NAME)+ADMIN_DIR_NAME.length)),-1==t.indexOf("-")?t="-"+t:t.indexOf("-")>0&&(-1==t.indexOf("/")||t.indexOf("/")>0)&&(t="/"+t),-1==t.indexOf("/api")&&(t="api"+t),-1==t.indexOf(ADMIN_DIR_NAME)&&(t=0!=t.indexOf("/")?ADMIN_DIR_NAME+"/"+t:ADMIN_DIR_NAME+t),-1==t.indexOf(SITE_URL)&&(t=SITE_URL+t),t},exception:function(t){if(120==t.code&&"object"==typeof t.errors){cms.clear_error();for(i in t.errors)cms.messages.error(t.errors[i],"error"),cms.error_field(i,t.errors[i])}else t.message&&(cms.clear_error(),cms.messages.error(t.message,"error"))},response:function(){return this._response}};$(function(){cms.ui.init(),KodiCMS.start(null,cms.settings),cms.init.run(),setTimeout(function(){cms.notifications.init()},1500),cms.messages.init()}),function(t){var e={settings:{updateOnResize:!1,contentHeight:!1,type:"height",offset:0,minHeight:0,onCalculate:function(t,e){t.css(this.type,e)},onResize:function(t,n){t.css(e.settings.type,n)}},children:function(n,i,s){return n.children().each(function(){var n=t(this);i.is(n)||n.is(":hidden")||(n.find(i).size()>0?(s-=n.outerHeight(!0)-n.outerHeight(),s=e.children(n,i,s)):s-=n.outerHeight(!0))}),s},get_calculated_height:function(t,n){var i=this.get_content_height(t);return i=this.children(t,n,i),i-=parseInt(e.settings.offset),i<e.settings.minHeight&&(i=e.settings.minHeight),i},get_content_height:function(t){var e=0;return e=this.settings.contentHeight?"boolean"==typeof this.settings.contentHeight||"auto"==this.settings.contentHeight?cms.calculateContentHeight():parseInt(this.settings.contentHeight):t.height(),e-3},get_taget_object:function(e,n){return"string"==typeof e||e instanceof String?t(e,n):$target_object instanceof jQuery?e:!1}};t.fn.calcHeightFor=function(n,i){e.settings=t.extend(e.settings,i);var s=t(this);if($target_object=e.get_taget_object(n,this),$target_object&&0!=s.find($target_object).size()){var o=e.get_content_height(s);return o=e.children(t(this),$target_object,o)}},t.fn.setHeightFor=function(n,i){return e.settings=t.extend(e.settings,i),this.each(function(){var i=t(this);if($target_object=e.get_taget_object(n,this),$target_object&&0!=i.find($target_object).size()){var s=$target_object.size();$target_object.each(function(){var n=t(this),o=e.get_calculated_height(i,n)/s;e.settings.onCalculate(n,o),e.settings.updateOnResize&&t(window).on("resize",i,function(){var t=e.get_calculated_height(i,n)/s;e.settings.onResize(n,t)})})}})}}(jQuery);